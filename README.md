# Getting started
This program contains 5 parts in 3 different folders. The backend, the frontend, the client, the estimator (in the client) and the MQTT broker (external) - all explained below.

After installation, the programs __must__ be run in the following order:
__1) MQTT broker__ (must be up and running first)
__2) Backend__ (must be up and running before the frontend)
__3) Frontend__ (must be up and running before the client)
__4) client program__ (will start the simulation so should run last)

the estimator can be run whenever, but should ideally be run before the client program. However it's not depedent on whether the mqtt broker or backend is running or not.
When you start the client program the simulation starts, and therefore it's important that the front end is connected so you can see the output. For the backend and the client program to be able to communicate though, the MQTT broker must be up and running.

# Installation process
How to.

## Backend
The backend is where the simulation lives. To run it install NodeJS from here https://nodejs.org/en/download/. The type _cd_ to go to the top level folder in a command window. The top level is where you find a file called _package.json_ and type _npm install_, or _npm i_ for the short hand form, to install all dependencies necessary. When all are installed, run _npm start_

## Frontend
The frontend is the program that will show you how your shuttles move. It runs on React and NodeJS. Install NodeJS and run _npm i_ to install the program. Type _npm start_ and the program will open a browser tab to show you the results.

## Client
The client sends commands to the backend controlling the shuttles. The client needs three files to run. The board.feed.data.json, board.movements.json and the board.shuttles.json.
Both the feed and the shuttles are made to fit a board of size 6 by 7 and the movements file is autogenerated by the estimator program called find_paths.py. 

### NodeJS client
To run the node js client you need to install NodeJS (Which you probably already have). Run _npm i_ to install the necessary depedencies. The run the command _npm start_ to start eh program.

## Estimator program
The estimator will produce an output which should be used by the client. Here you are free to elaborate with whichever method you find the most suitable. The output of the program should be placed in the data folder of the example program and be named: board.movements.json. Then the client will read it effortlessly and run the program as such. If you make any changes to the client it cannot be guaranteed that the json file will work as intended. We do however encourage you to change the client as much as you want.

You need to install _python 3, pip, tqdm, networkx, matplotlib_ to make it run. You can run it from the local folder

## MQTT broker
Downlod an MQTT broker and run. If you are running on windows, I'd suggest using the PAHO Mosquitto
https://mosquitto.org/download/

download it and start it as a service on windows